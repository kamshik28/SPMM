<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест камери</title>
</head>
<body>
<h1>Video</h1>


<video id="localVideo" autoplay muted></video>

<button id="toggleCamera">Ввімкнути / Вимкнути камеру</button>


<script>
    let localStream = null;
    let videoEnabled = true;  // Прапорець для статусу камери

    // Отримання локального відео та аудіо
    navigator.mediaDevices.getUserMedia({ video: true, audio: true })
        .then(stream => {
            localStream = stream;
            const localVideo = document.getElementById('localVideo');
            localVideo.srcObject = stream;  // Прив'язуємо стрім до локального відео

            console.log("Локальний відеопотік отримано.");
        })
        .catch(error => {
            console.error('Помилка при доступі до відео/аудіо', error);
        });

    // Функція для ввімкнення/вимкнення камери
    const toggleCamera = () => {
        if (!localStream) {
            console.error("Локальний відеопотік ще не готовий.");
            return;
        }

        videoEnabled = !videoEnabled;
        localStream.getVideoTracks().forEach(track => {
            track.enabled = videoEnabled;  // Включаємо/виключаємо відео
        });
    };

    // Прив'язка події до кнопки
    document.getElementById('toggleCamera').addEventListener('click', toggleCamera);
</script>
</body>
</html>
